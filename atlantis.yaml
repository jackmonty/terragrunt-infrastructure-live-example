version: 3
projects:
- name: terragrunt-example
  dir: non-prod/us-east-2
  workflow: terragrunt
  autoplan:
    when_modified: ["**/*.hcl", "**/*.tf"]
    enabled: true
workflows:
  terragrunt:
    plan:
      steps:
      - run: terragrunt run-all plan -out $PLANFILE
    apply:
      steps:
      - run: terragrunt run-all apply $PLANFILE --terragrunt-non-interactive
